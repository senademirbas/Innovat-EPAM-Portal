<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InnovatEPAM | Innovation Portal</title>
    <meta name="description"
        content="EPAM's enterprise innovation platform — submit, track, and evaluate engineering ideas.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ═══════════════════════════════════════════════
     AUTH VIEW (full-page, shown when logged out)
═══════════════════════════════════════════════ -->
    <div id="auth-view" class="hidden">
        <!-- Animated gradient orbs -->
        <div class="auth-orb auth-orb-1"></div>
        <div class="auth-orb auth-orb-2"></div>
        <div class="auth-orb auth-orb-3"></div>

        <div style="width:100%;max-width:380px;position:relative;z-index:1">
            <!-- Logo -->
            <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:2rem;justify-content:center">
                <div
                    style="width:2.5rem;height:2.5rem;background:var(--accent);border-radius:0.75rem;display:flex;align-items:center;justify-content:center;box-shadow:var(--accent-glow)">
                    <svg style="width:1.25rem;height:1.25rem;color:#fff" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                            d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                <span style="font-size:1.25rem;font-weight:800;letter-spacing:-0.03em">Innovat<span
                        style="color:var(--accent)">EPAM</span></span>
            </div>

            <!-- Auth card -->
            <div class="glass-card" style="padding:2rem;border-radius:1.25rem">
                <h2 id="auth-heading" style="margin-bottom:0.375rem">Sign In</h2>
                <p id="auth-subheading" style="color:var(--text-muted);font-size:0.875rem;margin-bottom:1.75rem">Access
                    your innovation portal</p>

                <!-- Login form -->
                <form id="login-form" style="display:flex;flex-direction:column;gap:1rem">
                    <div>
                        <label
                            style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Email</label>
                        <input id="login-email" type="email" class="input-field" placeholder="you@epam.com" required>
                    </div>
                    <div>
                        <label
                            style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Password</label>
                        <input id="login-password" type="password" class="input-field" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn-primary"
                        style="margin-top:0.5rem;width:100%;justify-content:center">Sign In</button>
                </form>

                <!-- Register form -->
                <form id="register-form" style="display:none;flex-direction:column;gap:1rem">
                    <div>
                        <label
                            style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Email</label>
                        <input id="reg-email" type="email" class="input-field" placeholder="you@epam.com" required>
                    </div>
                    <div>
                        <label
                            style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Password</label>
                        <input id="reg-password" type="password" class="input-field" placeholder="8+ characters"
                            required minlength="8">
                    </div>
                    <button type="submit" class="btn-primary"
                        style="margin-top:0.5rem;width:100%;justify-content:center">Create Account</button>
                </form>

                <div style="margin-top:1.5rem;text-align:center">
                    <button id="auth-toggle-btn"
                        style="background:none;border:none;cursor:pointer;color:var(--accent);font-size:0.875rem;font-weight:600;font-family:inherit">
                        Don't have an account? <span style="text-decoration:underline">Register</span>
                    </button>
                </div>
            </div>

            <p style="text-align:center;margin-top:1.5rem;font-size:0.75rem;color:var(--text-muted)">© 2026 EPAM Systems
                · Innovation Portal</p>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════
     APP SHELL  (shown when logged in)
═══════════════════════════════════════════════ -->
    <div id="app-shell" class="hidden" style="display:flex;flex-direction:row;">

        <!-- ── LEFT SIDEBAR ─────────────────────────── -->
        <aside id="sidebar">
            <!-- Logo -->
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">
                    <svg style="width:1rem;height:1rem;color:#fff" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                            d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                <span class="sidebar-wordmark">Innovat<span>EPAM</span></span>
            </div>

            <!-- Navigation -->
            <nav class="sidebar-nav">
                <span class="nav-section-label">Main</span>

                <button class="nav-item active" id="nav-ideas" onclick="routeTo('feed')">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                    <span>My Ideas</span>
                </button>

                <button class="nav-item hidden" id="nav-admin" onclick="routeTo('admin')">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    <span>Dashboard</span>
                </button>

                <button class="nav-item" id="nav-workspace" onclick="routeTo('workspace')">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                    </svg>
                    <span>Workspace</span>
                </button>

                <button class="nav-item hidden" id="nav-users" onclick="routeTo('users')">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <span>Users</span>
                </button>

                <button class="nav-item" id="nav-profile" onclick="routeTo('profile')">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    <span>Profile</span>
                </button>
            </nav>

            <!-- Bottom user card -->
            <div class="sidebar-user" id="sidebar-user-card">
                <div class="avatar" id="sidebar-avatar"></div>
                <div class="sidebar-user-info" id="sidebar-user-info">
                    <span class="sidebar-user-name" id="sidebar-user-email"></span>
                    <span class="sidebar-user-role" id="sidebar-user-role"></span>
                </div>
            </div>
        </aside>

        <!-- Mobile sidebar overlay -->
        <div id="sidebar-overlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

        <!-- ── TOP BAR ─────────────────────────────── -->
        <header id="topbar">
            <!-- Hamburger -->
            <button class="btn-icon" id="sidebar-toggle" onclick="toggleSidebar()" title="Toggle sidebar">
                <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <!-- Search -->
            <div class="search-bar">
                <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                    style="color:var(--text-muted);flex-shrink:0">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <input type="text" placeholder="Search ideas…" id="search-input">
            </div>

            <!-- Right actions -->
            <div class="topbar-right">
                <!-- Theme toggle -->
                <button class="btn-icon" id="theme-toggle" title="Toggle theme">
                    <svg id="icon-sun" width="18" height="18" fill="currentColor" viewBox="0 0 20 20" class="hidden">
                        <path
                            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464l-.707-.707a1 1 0 111.414-1.414l.707.707a1 1 0 01-1.414 1.414z" />
                    </svg>
                    <svg id="icon-moon" width="18" height="18" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                    </svg>
                </button>

                <!-- Notification bell -->
                <div style="position:relative">
                    <button class="btn-icon" id="notif-btn" onclick="toggleNotifPanel()" title="Notifications"
                        style="position:relative">
                        <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                        <span id="notif-badge"
                            style="position:absolute;top:4px;right:4px;width:8px;height:8px;background:var(--accent);border-radius:50%;box-shadow:0 0 6px var(--accent)"></span>
                    </button>
                    <!-- Notification dropdown panel -->
                    <div id="notif-panel" class="hidden" style="position:absolute;right:0;top:calc(100% + 0.625rem);width:22rem;z-index:200;
                        background:var(--bg-surface);border:1px solid var(--border);border-radius:1rem;
                        backdrop-filter:blur(24px) saturate(1.8);-webkit-backdrop-filter:blur(24px) saturate(1.8);
                        box-shadow:0 24px 60px rgba(0,0,0,0.35);overflow:hidden">
                        <div
                            style="padding:1rem 1.25rem 0.75rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between">
                            <p style="font-weight:800;font-size:0.9375rem">Notifications</p>
                            <span id="notif-count"
                                style="font-size:0.7rem;padding:0.15rem 0.6rem;border-radius:9999px;background:var(--accent);color:#fff;font-weight:700">3</span>
                        </div>
                        <div id="notif-list" style="max-height:19rem;overflow-y:auto;padding:0.5rem 0"></div>
                        <div style="padding:0.625rem 1.25rem;border-top:1px solid var(--border);text-align:center">
                            <button onclick="clearNotifs()"
                                style="font-size:0.75rem;color:var(--text-muted);background:none;border:none;cursor:pointer;font-family:inherit;font-weight:600">Mark
                                all as read</button>
                        </div>
                    </div>
                </div>


                <!-- Avatar dropdown -->
                <div style="position:relative">
                    <button class="avatar-btn" id="avatar-dropdown-btn" onclick="toggleAvatarDropdown()">
                        <div class="avatar" id="topbar-avatar"></div>
                        <span id="topbar-email"
                            style="font-size:0.8125rem;font-weight:600;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"></span>
                        <svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="2.5" style="color:var(--text-muted)">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <div id="avatar-dropdown" class="dropdown hidden">
                        <div style="padding:0.75rem 1rem">
                            <p style="font-size:0.8rem;font-weight:700" id="dd-email"></p>
                            <p style="font-size:0.72rem;color:var(--text-muted)" id="dd-role"></p>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="routeTo('profile');closeDropdown()">
                            <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            Profile
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" style="color:#ef4444" onclick="logout()">
                            <svg width="15" height="15" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            Sign Out
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- ── PAGE CONTENT ───────────────────────── -->
        <main id="page-content">

            <!-- FEED VIEW (Submitter) -->
            <section id="feed-view" class="hidden">
                <div
                    style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;margin-bottom:1.5rem">
                    <div>
                        <h2 style="margin-bottom:0.25rem">Innovation Feed</h2>
                        <p style="color:var(--text-muted);font-size:0.875rem">Your submitted and tracked ideas.</p>
                    </div>
                    <button class="btn-primary" id="open-submit-btn">
                        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                        </svg>
                        New Idea
                    </button>
                </div>

                <div style="display:flex;gap:0.5rem;flex-wrap:wrap;margin-bottom:1rem">
                    <button class="filter-chip active" data-filter="all">All</button>
                    <button class="filter-chip" data-filter="submitted">Pending</button>
                    <button class="filter-chip" data-filter="accepted">Accepted</button>
                    <button class="filter-chip" data-filter="rejected">Rejected</button>
                </div>

                <div id="idea-feed"></div>
            </section>

            <!-- ADMIN VIEW -->
            <section id="admin-view" class="hidden">
                <div style="margin-bottom:1.5rem">
                    <h2 style="margin-bottom:0.25rem">Admin Dashboard</h2>
                    <p style="color:var(--text-muted);font-size:0.875rem">Review, evaluate, and monitor all submissions.
                    </p>
                </div>

                <!-- KPI Cards -->
                <div
                    style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem">
                    <div class="kpi-card">
                        <p class="kpi-label">Total Ideas</p>
                        <p id="kpi-total" class="kpi-value">—</p>
                        <p id="kpi-total-trend" class="kpi-trend flat"></p>
                    </div>
                    <div class="kpi-card">
                        <p class="kpi-label">Accepted</p>
                        <p id="kpi-accepted" class="kpi-value" style="color:#22c55e">—</p>
                        <p id="kpi-accepted-trend" class="kpi-trend up"></p>
                    </div>
                    <div class="kpi-card">
                        <p class="kpi-label">Pending</p>
                        <p id="kpi-pending" class="kpi-value" style="color:#f59e0b">—</p>
                        <p id="kpi-pending-trend" class="kpi-trend flat"></p>
                    </div>
                    <div class="kpi-card">
                        <p class="kpi-label">Success Rate</p>
                        <p id="kpi-rate" class="kpi-value" style="color:var(--accent)">—</p>
                        <p id="kpi-rate-trend" class="kpi-trend up"></p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="chart-container" style="margin-bottom:1.5rem">
                    <p class="section-label">Idea Submissions — Last 30 Days</p>
                    <div style="height:220px"><canvas id="submissions-chart"></canvas></div>
                </div>

                <!-- All ideas feed -->
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem">
                    <p class="section-label" style="margin-bottom:0">All Submissions</p>
                    <span id="admin-count" style="font-size:0.75rem;color:var(--text-muted)"></span>
                </div>
                <div id="admin-feed"></div>
            </section>

            <!-- PROFILE VIEW -->
            <section id="profile-view" class="hidden">
                <div style="margin-bottom:1.5rem">
                    <h2 style="margin-bottom:0.25rem">My Profile</h2>
                    <p style="color:var(--text-muted);font-size:0.875rem">Your identity, social links, and submission
                        history.</p>
                </div>

                <div class="bento-grid">
                    <!-- Identity card -->
                    <div class="glass-card" style="padding:1.75rem;display:flex;flex-direction:column;gap:1rem">
                        <div style="display:flex;align-items:center;gap:1rem">
                            <div class="avatar-lg" id="profile-avatar-lg"></div>
                            <div style="flex:1;min-width:0">
                                <h3 id="profile-name"
                                    style="margin-bottom:0.2rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">
                                </h3>
                                <p id="profile-bio"
                                    style="color:var(--text-muted);font-size:0.875rem;line-height:1.4;margin-bottom:0.625rem">
                                </p>
                                <div id="profile-social-links" style="display:flex;flex-wrap:wrap;gap:0.5rem"></div>
                            </div>
                        </div>
                        <div id="profile-role-pill" style="align-self:flex-start"></div>
                    </div>

                    <!-- Stats card -->
                    <div class="glass-card" style="padding:1.75rem">
                        <p class="section-label">Submission Stats</p>
                        <div
                            style="display:grid;grid-template-columns:repeat(3,1fr);gap:0.875rem;margin-bottom:0.875rem">
                            <div style="text-align:center">
                                <p id="stat-total" style="font-size:2rem;font-weight:800;letter-spacing:-0.03em">—</p>
                                <p
                                    style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted)">
                                    Total</p>
                            </div>
                            <div style="text-align:center">
                                <p id="stat-accepted"
                                    style="font-size:2rem;font-weight:800;letter-spacing:-0.03em;color:#22c55e">—</p>
                                <p
                                    style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted)">
                                    Accepted</p>
                            </div>
                            <div style="text-align:center">
                                <p id="stat-rejected"
                                    style="font-size:2rem;font-weight:800;letter-spacing:-0.03em;color:#ef4444">—</p>
                                <p
                                    style="font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted)">
                                    Rejected</p>
                            </div>
                        </div>
                        <div
                            style="background:var(--bg-elevated);border:1px solid var(--border);border-radius:0.75rem;padding:1rem;text-align:center">
                            <p id="stat-rate"
                                style="font-size:1.75rem;font-weight:800;color:var(--accent);letter-spacing:-0.03em">—
                            </p>
                            <p style="font-size:0.75rem;color:var(--text-muted);font-weight:600">Success Rate</p>
                        </div>
                    </div>

                    <!-- Edit profile form -->
                    <div class="glass-card" style="padding:1.75rem">
                        <h4 style="margin-bottom:1.25rem">Edit Profile</h4>
                        <form id="edit-profile-form" style="display:flex;flex-direction:column;gap:1rem">
                            <div>
                                <label
                                    style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Avatar
                                    URL</label>
                                <input id="ep-avatar" type="url" class="input-field"
                                    placeholder="https://example.com/avatar.png">
                            </div>
                            <div>
                                <label
                                    style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Bio</label>
                                <textarea id="ep-bio" class="input-field" rows="2" maxlength="200"
                                    placeholder="A short description about yourself…"></textarea>
                            </div>
                            <div
                                style="display:grid;grid-template-columns:repeat(auto-fit, minmax(400px, 1fr));gap:1.5rem">
                                <div>
                                    <label
                                        style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">GitHub</label>
                                    <input id="ep-github" type="url" class="input-field"
                                        placeholder="https://github.com/you">
                                </div>
                                <div>
                                    <label
                                        style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">LinkedIn</label>
                                    <input id="ep-linkedin" type="url" class="input-field"
                                        placeholder="https://linkedin.com/in/you">
                                </div>
                            </div>
                            <button type="submit" class="btn-primary" style="align-self:flex-start">Save
                                Profile</button>
                        </form>
                    </div>

                    <!-- Change password -->
                    <div class="glass-card" style="padding:1.75rem">
                        <h4 style="margin-bottom:1.25rem">Change Password</h4>
                        <form id="change-password-form" style="display:flex;flex-direction:column;gap:1rem">
                            <div>
                                <label
                                    style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Current
                                    Password</label>
                                <input id="cp-current" type="password" class="input-field" placeholder="••••••••"
                                    required>
                            </div>
                            <div>
                                <label
                                    style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">New
                                    Password</label>
                                <input id="cp-new" type="password" class="input-field" placeholder="8+ characters"
                                    required minlength="8">
                            </div>
                            <div>
                                <label
                                    style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Confirm
                                    New</label>
                                <input id="cp-confirm" type="password" class="input-field"
                                    placeholder="Repeat new password" required>
                            </div>
                            <button type="submit" class="btn-primary" style="align-self:flex-start">Update
                                Password</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- WORKSPACE VIEW -->
            <section id="workspace-view" class="hidden">
                <div style="margin-bottom:1.5rem">
                    <h2 style="margin-bottom:0.25rem">My Workspace</h2>
                    <p style="color:var(--text-muted);font-size:0.875rem">Personal tasks and schedule at a glance.</p>
                </div>
                <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(400px, 1fr));gap:1.5rem">
                    <!-- Todo Checklist -->
                    <div class="glass-card" style="padding:1.75rem;display:flex;flex-direction:column;gap:1rem">
                        <div style="display:flex;align-items:center;justify-content:space-between">
                            <h4 style="font-size:1rem;font-weight:800">My Tasks</h4>
                            <span id="todo-count"
                                style="font-size:0.7rem;padding:0.2rem 0.6rem;border-radius:9999px;background:var(--bg-elevated);color:var(--text-muted);font-weight:700">0
                                tasks</span>
                        </div>
                        <!-- Add todo input -->
                        <div style="display:flex;gap:0.5rem">
                            <input id="todo-input" type="text" class="input-field" placeholder="Add a task…"
                                style="flex:1" onkeydown="if(event.key==='Enter')addTodo()">
                            <button onclick="addTodo()" class="btn-primary"
                                style="padding:0.5rem 1rem;border-radius:0.625rem;flex-shrink:0">Add</button>
                        </div>
                        <!-- Todo list -->
                        <div id="todo-list"
                            style="display:flex;flex-direction:column;gap:0.5rem;max-height:24rem;overflow-y:auto">
                        </div>
                    </div>

                    <!-- Mini Calendar -->
                    <div class="glass-card" style="padding:1.75rem">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem">
                            <button onclick="calPrev()" class="btn-icon" style="font-size:1rem">&#8249;</button>
                            <h4 id="cal-title" style="font-size:0.9375rem;font-weight:800"></h4>
                            <button onclick="calNext()" class="btn-icon" style="font-size:1rem">&#8250;</button>
                        </div>
                        <div id="mini-calendar" class="calendar-grid"></div>
                        <div
                            style="margin-top:1rem;display:flex;align-items:center;gap:1rem;font-size:0.7rem;color:var(--text-muted);font-weight:600">
                            <span><span
                                    style="display:inline-block;width:6px;height:6px;border-radius:50%;background:var(--accent);margin-right:4px;vertical-align:middle"></span>Idea</span>
                            <span><span
                                    style="display:inline-block;width:6px;height:6px;border-radius:50%;background:#a78bfa;margin-right:4px;vertical-align:middle"></span>Event</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- USERS VIEW (Admin Only) -->
            <section id="users-view" class="hidden">
                <div
                    style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;margin-bottom:1.5rem">
                    <div>
                        <h2 style="margin-bottom:0.25rem">User Management</h2>
                        <p style="color:var(--text-muted);font-size:0.875rem">View, manage and promote registered users.
                        </p>
                    </div>
                    <span id="users-count" style="font-size:0.8125rem;color:var(--text-muted);font-weight:600"></span>
                </div>
                <div class="glass-card" style="padding:0;overflow:hidden">
                    <div style="overflow-x:auto">
                        <table class="user-table" id="users-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Role</th>
                                    <th>Total</th>
                                    <th>Accepted</th>
                                    <th>Rate</th>
                                    <th>Activity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

        </main>

    </div>

    <!-- ═══════════════════════════════════════════════
     DRAWERS & OVERLAYS
═══════════════════════════════════════════════ -->

    <!-- Drawer overlay backdrop -->
    <div id="drawer-overlay" class="drawer-overlay" onclick="closeDrawers()"></div>

    <!-- Detail Drawer (Timeline — submitter) -->
    <div id="detail-drawer" class="drawer">
        <div class="drawer-header">
            <div style="flex:1;min-width:0">
                <h3 id="dd-title"
                    style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:0.375rem"></h3>
                <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap">
                    <span id="dd-category"
                        style="font-size:0.75rem;padding:0.2rem 0.65rem;border-radius:9999px;border:1px solid var(--border);color:var(--text-muted);font-weight:600"></span>
                    <span id="dd-status"></span>
                </div>
                <div id="dd-tags" style="display:flex;flex-wrap:wrap;gap:0.375rem;margin-top:0.625rem"></div>
            </div>
            <button class="btn-icon" onclick="closeDrawers()" style="flex-shrink:0;margin-left:0.75rem">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="drawer-body">
            <div class="timeline" id="dd-timeline"></div>
        </div>
    </div>

    <!-- Review Drawer (Admin) -->
    <div id="review-drawer" class="drawer">
        <div class="drawer-header">
            <div style="flex:1;min-width:0">
                <p
                    style="font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted);margin-bottom:0.375rem">
                    Review Submission</p>
                <h3 id="rd-title"
                    style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:0.375rem"></h3>
                <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap">
                    <span id="rd-category"
                        style="font-size:0.75rem;padding:0.2rem 0.65rem;border-radius:9999px;border:1px solid var(--border);color:var(--text-muted);font-weight:600"></span>
                    <span id="rd-status"></span>
                </div>
            </div>
            <button class="btn-icon" onclick="closeDrawers()" style="flex-shrink:0;margin-left:0.75rem">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="drawer-body">
            <!-- Author -->
            <div id="rd-author-row"
                style="display:flex;align-items:center;gap:0.75rem;padding:0.875rem;background:var(--bg-elevated);border:1px solid var(--border);border-radius:0.75rem">
            </div>

            <!-- Tags -->
            <div id="rd-tags" style="display:flex;flex-wrap:wrap;gap:0.375rem"></div>

            <!-- Description -->
            <div>
                <p class="section-label">Description</p>
                <div
                    style="background:var(--bg-elevated);border:1px solid var(--border);border-radius:0.75rem;padding:1rem">
                    <p id="rd-description" style="font-size:0.875rem;line-height:1.65;white-space:pre-wrap"></p>
                </div>
            </div>

            <!-- Problem -->
            <div id="rd-problem-row" class="hidden">
                <p class="section-label">Problem Statement</p>
                <div
                    style="background:var(--bg-elevated);border:1px solid var(--border);border-radius:0.75rem;padding:1rem">
                    <p id="rd-problem" style="font-size:0.875rem;line-height:1.65"></p>
                </div>
            </div>

            <!-- Solution -->
            <div id="rd-solution-row" class="hidden">
                <p class="section-label">Proposed Solution</p>
                <div
                    style="background:var(--bg-elevated);border:1px solid var(--border);border-radius:0.75rem;padding:1rem">
                    <p id="rd-solution" style="font-size:0.875rem;line-height:1.65"></p>
                </div>
            </div>

            <!-- Attachment -->
            <div id="rd-attach-row" class="hidden">
                <a id="rd-attach-link" href="#" target="_blank"
                    style="display:inline-flex;align-items:center;gap:0.5rem;font-size:0.875rem;font-weight:600;color:var(--accent);text-decoration:none">
                    <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
                    </svg>
                    Download Attachment
                </a>
            </div>

            <input type="hidden" id="rd-idea-id">
        </div>
        <div class="drawer-footer">
            <div>
                <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Evaluation Comment
                    <span style="color:#ef4444">*</span></label>
                <textarea id="rd-comment" class="input-field" rows="3"
                    placeholder="Provide detailed, constructive feedback…"></textarea>
            </div>
            <div class="actions">
                <button class="btn-success" style="flex:1" onclick="submitReview('accepted')">✓ Accept</button>
                <button class="btn-danger" style="flex:1" onclick="submitReview('rejected')">✗ Reject</button>
                <button class="btn-ghost" onclick="closeDrawers()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════
     SUBMIT IDEA MODAL (3-Step)
═══════════════════════════════════════════════ -->
    <div id="submit-modal" class="modal-overlay hidden">
        <div class="modal-box">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem">
                <h3>Submit New Idea</h3>
                <button class="btn-icon" onclick="closeSubmitModal()">
                    <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Step progress -->
            <div class="step-indicator">
                <span id="step-label" style="color:var(--text-muted)">Step 1 of 3 — Details & Tags</span>
                <span id="step-frac" style="color:var(--accent);font-weight:700">1/3</span>
            </div>
            <div class="step-progress-track">
                <div id="step-progress-fill" class="step-progress-fill" style="width:33%"></div>
            </div>

            <form id="submit-idea-form">
                <!-- Step 1 -->
                <div id="step-1" class="step-panel active" style="display:flex;flex-direction:column;gap:1rem">
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Title
                            <span style="color:#ef4444">*</span></label>
                        <input id="idea-title" type="text" class="input-field"
                            placeholder="e.g. AI-Powered Code Review Tool" required>
                    </div>
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Category
                            <span style="color:#ef4444">*</span></label>
                        <select id="idea-category" class="input-field" required>
                            <option value="" disabled selected>Select a category…</option>
                            <option value="AI">AI &amp; Machine Learning</option>
                            <option value="Cloud">Cloud Native</option>
                            <option value="Productivity">Developer Productivity</option>
                            <option value="Security">Security</option>
                            <option value="Process">Process Optimization</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Tags <span
                                style="font-size:0.75rem;font-weight:400;color:var(--text-muted)">(click to
                                add)</span></label>
                        <div id="tag-chips" style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:0.625rem">
                            <button type="button" class="tag-chip-btn" data-tag="AI">AI</button>
                            <button type="button" class="tag-chip-btn" data-tag="LLM">LLM</button>
                            <button type="button" class="tag-chip-btn" data-tag="Cloud">Cloud</button>
                            <button type="button" class="tag-chip-btn" data-tag="DevTools">DevTools</button>
                            <button type="button" class="tag-chip-btn" data-tag="Security">Security</button>
                            <button type="button" class="tag-chip-btn" data-tag="Automation">Automation</button>
                            <button type="button" class="tag-chip-btn" data-tag="Open Source">Open Source</button>
                            <button type="button" class="tag-chip-btn" data-tag="Data">Data</button>
                        </div>
                        <input id="idea-tags-input" type="text" class="input-field"
                            placeholder="Or type custom tags, comma-separated">
                    </div>
                    <div style="display:flex;justify-content:flex-end;padding-top:0.5rem">
                        <button type="button" id="step1-next" class="btn-primary">Next →</button>
                    </div>
                </div>

                <!-- Step 2 -->
                <div id="step-2" class="step-panel" style="display:flex;flex-direction:column;gap:1rem">
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Problem
                            Statement</label>
                        <p style="font-size:0.8rem;color:var(--text-muted);margin-bottom:0.625rem">What specific problem
                            does this idea solve? Who is affected?</p>
                        <textarea id="idea-problem" class="input-field" rows="7"
                            placeholder="Describe the pain point or opportunity in detail…"></textarea>
                    </div>
                    <div style="display:flex;justify-content:space-between;padding-top:0.5rem">
                        <button type="button" id="step2-back" class="btn-ghost">← Back</button>
                        <button type="button" id="step2-next" class="btn-primary">Next →</button>
                    </div>
                </div>

                <!-- Step 3 -->
                <div id="step-3" class="step-panel" style="display:flex;flex-direction:column;gap:1rem">
                    <div>
                        <label
                            style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Description
                            <span style="color:#ef4444">*</span></label>
                        <textarea id="idea-description" class="input-field" rows="3"
                            placeholder="Brief executive summary (required)…" required></textarea>
                    </div>
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Proposed
                            Solution</label>
                        <textarea id="idea-solution" class="input-field" rows="4"
                            placeholder="How does your idea solve the problem?"></textarea>
                    </div>
                    <div>
                        <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Attachment
                            <span
                                style="font-size:0.75rem;font-weight:400;color:var(--text-muted)">(optional)</span></label>
                        <input id="idea-attachment" type="file" class="input-field" style="padding:0.5rem 0.875rem">
                    </div>
                    <div style="display:flex;gap:0.75rem;padding-top:0.5rem">
                        <button type="button" id="step3-back" class="btn-ghost">← Back</button>
                        <button type="submit" class="btn-primary" style="flex:1;justify-content:center">
                            <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                stroke-width="2.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            Submit Idea
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════
     TOAST NOTIFICATION
═══════════════════════════════════════════════ -->
    <div id="toast" class="toast toast-hidden" role="alert">
        <span id="toast-icon" class="toast-icon"></span>
        <span id="toast-message"></span>
        <span class="toast-close" onclick="this.closest('.toast').className='toast toast-hidden'">✕</span>
    </div>

    <script src="app.js"></script>
    <!-- Event Modal (Calendar) -->
    <div id="event-modal" class="drawer" style="width:min(400px, 100vw)">
        <div class="drawer-header">
            <h3>Add Calendar Event</h3>
            <button class="btn-icon" onclick="closeEventModal()">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="drawer-body">
            <div>
                <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Title</label>
                <input id="event-title" type="text" class="input-field" placeholder="e.g. Design Sync">
            </div>
            <div>
                <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Date</label>
                <input id="event-date" type="date" class="input-field">
            </div>
            <div>
                <label style="display:block;font-size:0.8125rem;font-weight:600;margin-bottom:0.5rem">Color</label>
                <div style="display:flex;gap:0.5rem">
                    <input type="radio" name="event-color" value="#06b6d4" checked id="c1">
                    <label for="c1"
                        style="width:20px;height:20px;border-radius:50%;background:#06b6d4;cursor:pointer"></label>
                    <input type="radio" name="event-color" value="#a78bfa" id="c2">
                    <label for="c2"
                        style="width:20px;height:20px;border-radius:50%;background:#a78bfa;cursor:pointer"></label>
                    <input type="radio" name="event-color" value="#f59e0b" id="c3">
                    <label for="c3"
                        style="width:20px;height:20px;border-radius:50%;background:#f59e0b;cursor:pointer"></label>
                </div>
            </div>
        </div>
        <div class="drawer-footer">
            <div class="actions">
                <button class="btn-primary" onclick="saveCalendarEvent()" style="flex:1">Save Event</button>
            </div>
        </div>
    </div>
</body>

</html>